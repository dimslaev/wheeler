!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):"object"==typeof exports?exports.BigScroll=n():t.BigScroll=n()}("undefined"!=typeof self?self:this,function(){"use strict";function r(t,n){for(var e=0,o=t.slice(Math.max(t.length-n,1)),i=0;i<o.length;i++)e+=o[i];return Math.ceil(e/n)}function n(t,n){t<=u.maxScrollCount&&t>=u.minScrollCount?s=t:n||console.error("Scroll count"+t+"falls outside min-max range.")}function l(t){d=!1,u.onScrollStart&&u.onScrollStart(t,s),setTimeout(function(){d=!0,function(t){"down"===t&&"down"===f&&n(s+1,!0),"up"===t&&"up"===f&&n(s-1,!0)}(f=t),u.onScrollEnd&&u.onScrollEnd(t,s)},u.scrollDuration+30)}function e(){event.preventDefault();var t=performance.now(),n=event.wheelDelta||-event.deltaY||-event.detail,e=Math.max(-1,Math.min(1,n));e=e<0?"down":"up",149<v.length&&v.shift(),v.push(Math.abs(n));var o=t-h;if(h=t,200<o&&(v=[]),d){var i=r(v,10);r(v,70)<=i&&l(e)}}function o(){w=event.touches[0].pageY}function i(){event.preventDefault(),p=event.touches[0].pageY,d&&Math.abs(w-p)>window.innerHeight/100*u.touchSensitivity&&(p<w?l("down"):w<p&&l("up"))}function c(){u&&(window.removeEventListener("wheel",e),window.removeEventListener("touchstart",o),window.removeEventListener("touchmove",i),d=!(s=0),f="down",u=null)}var u,t={},a={minScrollCount:0,maxScrollCount:3,onScrollStart:function(){},onScrollEnd:function(){},scrollDuration:600,touchSensitivity:5},s=0,d=!0,f="down",v=[],h=0,w=0,p=0;return t.init=function(t){c(),u=function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}(a,t||{}),window.addEventListener("wheel",e.bind(this),{passive:!1}),window.addEventListener("touchstart",o.bind(this)),window.addEventListener("touchmove",i.bind(this),{passive:!1})},t.destroy=c,t.setScrollCount=n,t});