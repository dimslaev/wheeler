!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.Wheeler=t():e.Wheeler=t()}("undefined"!=typeof self?self:this,function(){"use strict";var e={},t={minScrollCount:0,maxScrollCount:3,onScrollStart:function(){},onScrollEnd:function(){},scrollDuration:600,touchSensitivity:5},n={},o=0,i=!0,r="down",l=[],c=0,u=0,a=0;function s(){event.preventDefault();var e=performance.now(),t=event.wheelDelta||-event.deltaY||-event.detail,n=Math.max(-1,Math.min(1,t));n=n<0?"down":"up",149<l.length&&l.shift(),l.push(Math.abs(t));var o=e-c;if(c=e,200<o&&(l=[]),i){var r=p(l,10);p(l,70)<=r&&v(n)}}function f(){u=event.touches[0].pageY}function d(){event.preventDefault(),a=event.touches[0].pageY,i&&Math.abs(u-a)>window.innerHeight/100*n.touchSensitivity&&(a<u?v("down"):u<a&&v("up"))}function v(e){i=!1,n.onScrollStart&&n.onScrollStart(e,o),setTimeout(function(){i=!0,function(e){"down"===e&&"down"===r&&h(o+1,!0);"up"===e&&"up"===r&&h(o-1,!0)}(r=e),n.onScrollEnd&&n.onScrollEnd(e,o)},n.scrollDuration+30)}function h(e,t){e<=n.maxScrollCount&&e>=n.minScrollCount?o=e:t||console.error("Scroll count"+e+"falls outside min-max range.")}function w(){window.removeEventListener("wheel",s),window.removeEventListener("touchstart",f),window.removeEventListener("touchmove",d),i=!(o=0),r="down",n={}}function p(e,t){for(var n=0,o=e.slice(Math.max(e.length-t,1)),r=0;r<o.length;r++)n+=o[r];return Math.ceil(n/t)}return e.init=function(e){w(),n=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(t,e||{}),window.addEventListener("wheel",s,{passive:!1}),window.addEventListener("touchstart",f),window.addEventListener("touchmove",d,{passive:!1})},e.destroy=w,e.setScrollCount=h,e});